<!DOCTYPE html>
<html>
    <head>
        <title>Test: Deep Venous Thrombosis</title>
        <link rel="stylesheet" href="index.css" /> 
        <script>
			window.location = "https://docs.google.com/presentation/d/1K-a_2nKI2SwmNYGFGsrqVmLy6hSG3olx-LOnU_CNLj0/edit?usp=sharing"; 
            window.onload = function () {
                window.location = "#0";
            }
        </script>
		<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js"></script> 
	
		<style>
			.question {
				background-color: aqua;
			}
		</style>
	
	</head>
    <body>
        <div class = "wrapper">
            <div class = "intro slide">
                <div>Test! Very important test</div>
				<div>Were you paying attention?</div>
				<button><a href = "#1">Start</a></button>
            </div>
        </div>
        <div class = "wrapper">
            <div class = "slide">
                <div class = "slide-header">Test!!!!!</div>
                <div class = "main-content">
					<div id = "TOASTtarget"></div> 
				</div>
            </div>
        </div>
        
				
    </body>
    <script>
        let slides = Array.from(document.getElementsByClassName("wrapper"));
        slides.forEach((elem, index) => {
            elem.id = index;
        });
        console.log(slides.length);

        let startingPos = 0;
        let manageState = (changePos) => {
            if ( (startingPos + changePos) < slides.length && (startingPos + changePos) >= 0) {
                startingPos += changePos;
            }
            window.location = "#" + startingPos;
            console.log(startingPos);
        }
		/* 
        document.addEventListener("keydown", function(event){
            switch(event.key) {
                case 'n':
                case 'N':
                case 'ArrowRight':
                    manageState(1)
                    return
                case 'b':
                case 'B':
                case 'ArrowLeft':
                    manageState(-1);
                    return
                default:
                    return
            }
        });
		*/ 
		
		let LAA = 'Large Artery Atherosclerosis'
		let CE = 'Cardiac Source of Embolism' 
		let LAC = 'Small-Vessel Occlusion (Lacune)'
		let SOD = 'Stroke of Other Determined Aetiology'
		let UT = 'Undetermined Aetiology (Cryptogenic)'	
		
		let questionArray= [{
			question: 'What is DVT?',
			correctAnswer: 'deep venous thrombosis', 
			incorrectAnswer1: 'something in the lungs', 
			incorrectAnswer2: 'Something in the brain'
		}, 
		{
			question: 'What is my favourite colour?',
			correctAnswer: 'red', 
			incorrectAnswer1: 'lime green', 
			incorrectAnswer2: 'blue'
		},
		{
			question: 'Who is taller? ',
			correctAnswer: 'Erol', 
			incorrectAnswer1: 'Jeffrey', 
			incorrectAnswer2: 'Callum'
		}, 
		{
			question: 'Who gave the best presentation?', 
			correctAnswer: 'Erol', 
			incorrectAnswer1: 'Callum', 
			incorrectAnswer2: 'Azzy', 
		}
		]
    </script>
	<script type="text/babel">		
		class Tree extends React.Component {
			constructor(props) {
				super(props);
				this.state = {
					test: 0,
					leaf: false,
					name: false,
					begun: false,
					nameEntered: false,
					name: '',
					test: 'asdf',
					numQuest: 0, 
					score: 0, 
					correctAnswer: '', 
					incorrectAnswer1: '',
					incorrectAnswer2: '', 
					questionIndex: 0
				}
				this.yesClick = this.yesClick.bind(this);
				this.noClick = this.noClick.bind(this);
				this.resetEverything = this.resetEverything.bind(this);
				this.beginTest = this.beginTest.bind(this); 
				this.handleChange = this.handleChange.bind(this); 
				this.beginRealTest = this.beginRealTest.bind(this); 
				this.nextQuestion = this.nextQuestion.bind(this); 
				this.answer = this.answer.bind(this); 
			}

			yesClick () {
				if (typeof testArr[this.state.test].answerYes === "number") {
						this.setState(function (state, props) {
						return {test: testArr[state.test].answerYes}
					})
				} else {
					this.setState(function (state, props) {
						return {leaf: true, answer: testArr[state.test].answerYes}
					})
				}
			}

			noClick () {
				if (typeof testArr[this.state.test].answerNo === "number") {
						this.setState(function (state, props) {
						return {test: testArr[state.test].answerNo}
					})
				} else {
					this.setState(function (state, props) {
						return {leaf: true, answer: testArr[state.test].answerNo}
					})
				}		
			}

			resetEverything () {
				this.setState({
					test: 0,
					leaf: false,
				})
			}

			beginTest () {
				this.setState({
					begun: true, 
				})
			}

			handleChange (event) {
				console.log('works')
				this.setState({name: event.target.value}); 
			}

			beginRealTest () {
				console.log(this.state.name); 
				this.setState({
					numQuest: (this.state.numQuest + 1), 
					questionIndex: (this.state.questionIndex + 1), 
				}); 
				this.setState({
					nameEntered: true, 
					currentQuestion: questionArray[this.state.questionIndex].question, 
					correctAnswer: questionArray[this.state.questionIndex].correctAnswer,
					incorrectAnswer1: questionArray[this.state.questionIndex].incorrectAnswer1,
					incorrectAnswer2: questionArray[this.state.questionIndex].incorrectAnswer2
				
				}); 
			}

			nextQuestion () {
				this.setState({
					numQuest: (this.state.numQuest + 1), 
					questionIndex: (this.state.questionIndex + 1), 
				}); 
				this.setState({
					nameEntered: true, 
					currentQuestion: questionArray[this.state.questionIndex].question, 
					correctAnswer: questionArray[this.state.questionIndex].correctAnswer,
					incorrectAnswer1: questionArray[this.state.questionIndex].incorrectAnswer1,
					incorrectAnswer2: questionArray[this.state.questionIndex].incorrectAnswer2
				
				}); 
			}

			answer () {
				if (this.state.name == "Azzy" || this.state.name == "azzy" || this.state.name == "Azleena") {

				} else {
					this.setState({score: (this.state.score + 1)}); 
				}
			}

			render () {
				if (!this.state.begun) {
					return (
					<div id = "container">
						<button onClick = {this.beginTest}>Begin test?</button>
					</div>
					);		
				} else if (!this.state.nameEntered) {
					return (
					<div id = "container">
						<div>What is your name?</div>
						<input value = {this.state.name} onChange = {this.handleChange} /> 
						<button onClick = {this.beginRealTest}>Next</button> 
					</div>
					);	
				} else { 
					return (
						<div id = "container">
							<div id = "stats">
								<div>Name: {this.state.name}</div>
								<div>Score: {this.state.score}/{this.state.numQuest}</div> 
							</div> 
							<div id = "question">{this.state.currentQuestion}</div>
							<button className = "question" onClick = {this.answer}>{this.state.correctAnswer}</button>
							<button className = "question" onClick = {this.answer}>{this.state.incorrectAnswer1}</button>
							<button className = "question" onClick = {this.answer}>{this.state.incorrectAnswer2}</button>
							<button onClick = {this.nextQuestion}>Next Question</button>
						</div>
					); 			
				}
			}
		}
		
		ReactDOM.render(<Tree />, document.getElementById("TOASTtarget"));
	</script> 
</html>